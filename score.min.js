!function(t){const e=(t,i)=>{for(let a of Object.keys(i))i[a]instanceof Object&&Object.assign(i[a],e(t[a],i[a]));return Object.assign(t||{},i),t};t.fn.score=function(i){const a=e({starColor:"gold",backgroundColor:"transparent",editable:!1,integerOnly:!1,zeroAvailable:!1,display:{showNumber:!1,placeLimit:1},point:{max:5,rate:0}},i=i||{}),s=function(t,e){return e/t*100},o=function(t,e,i){return(t*e/100).toFixed(i||a.display.placeLimit)};function n(e){const i=this.parentNode._data,s=parseInt(window.getComputedStyle(this,null).width);let n=e.offsetX/s*100;a.zeroAvailable||(n=0==n?.1:n),t(this).find(".foreground").css("width",n+"%"),a.display.showNumber&&t(this).parent().find(".display-panel").text(o(i.max,n)),"click"===e.type&&(t(this).off("click"),t(this).off("mousemove"),t(this).one("mouseenter",d))}function r(e){const i=this.parentNode._data,s=parseInt(window.getComputedStyle(this,null).width),n=100/i.max;let r=e.offsetX/s*100;r=(Math.floor((r-.001)/n)+1)*n,a.zeroAvailable||0==r&&(r=n),t(this).find(".foreground").css("width",r+"%"),a.display.showNumber&&t(this).parent().find(".display-panel").text(o(i.max,r)),"click"===e.type&&(t(this).off("click"),t(this).off("mousemove"),t(this).one("mouseenter",d))}function d(e){a.editable&&(a.integerOnly?(t(this).click(r),t(this).mousemove(r)):(t(this).click(n),t(this).mousemove(n)))}return this.each(function(){t(this).css({display:"inline-flex",cursor:"pointer",color:a.starColor,backgroundColor:a.backgroundColor}),this._data={max:t(this).data("max")||a.point.max,rate:t(this).data("rate")||a.point.rate};const e=a.display.integerOnly?function(t,e){const i=100/t;return Math.floor(s(t,e)/i)*i}(this._data.max,this._data.rate):s(this._data.max,this._data.rate),i=t("<div>").addClass("star").css("position","relative").css("display","inline-flex"),o=t("<div>").addClass("foreground").css("overflow","hidden").css("width",e+"%").text((d=this._data.max,"★".repeat(d)));var d;const l=t("<div>").addClass("background").css("position","absolute").text(function(t){return"☆".repeat(t)}(this._data.max));if(i.append(o).append(l).appendTo(this),a.display.showNumber){t("<div>").addClass("display-panel").text(this._data.rate.toFixed(a.display.placeLimit)).appendTo(this)}a.editable&&(a.integerOnly?(i.click(r),i.mousemove(r)):(i.click(n),i.mousemove(n)))})}}(jQuery);
